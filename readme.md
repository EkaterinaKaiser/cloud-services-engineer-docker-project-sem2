1. Контейнеризация фронтенда и бэкенда:

Контейнер для бэкенда работает на порту 8081, для фронтенда на порту 80.
Система доступна по ссылке: http://89.169.156.255
Деплой происходит автоматически по статичному ip, указанному выше, при пуше новых изенений в репозиторий.
Вручную запустить сборку можно командой: docker compose up -d

2. Оптимизация размера образов:

Использованы multi-stage для фронтенда и бэкенда с двумя этапами на образе alpine.
Размер итоговых образов:
- frontend: 54.3 mb, 
- backend: 34 mb,
- ngnix: 52.5 mb.

3. Конфигурируемость контейнеров:

Используется docker secrets для переменных:
DOCKER_USER, DOCKER_PASSWORD, SSH_USER, SSH_PRIVATE_KEY.

4. Инфраструктура и устойчивость приложения:

В docker-compose описаны все сервисы, добавлен перезапуск и healthchecks. Добавлены volumes для хранения логов. Исходя из логики системы не очевидно, что еще имеет смысл сохранять в volumes.

5. Масштабируемость и балансировка нагрузки:

Добавлена балансировка нагрузки. Можно проверить, отправив команду:

seq 200 | xargs -n1 -P50 -I{} sh -c 'curl -sI http://89.169.156.255/api/products/ | grep -i X-Upstream' \
 | sort | uniq -c

Пример вывода:

    99 X-Upstream: 172.18.0.2:8081
    101 X-Upstream: 172.18.0.3:8081

Нагрузка рапределяется примерно равномерно между двумя бэкендами.

6. Основы безопасности контейнеров:

Для бэкенда создан юзер с минимальными правами, root не используется. 

7. Управление секретами:

8. Безопасность образов: